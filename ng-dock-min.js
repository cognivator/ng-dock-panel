angular.module("ngDock",[]).factory("dock",function(){var e=["left","right","top","bottom","fill"];return{dockRefs:{},valids:e,handlesByDock:{top:"s",left:"e",right:"w",bottom:"n"},Area:function(){function t(e,t,n){e.position="absolute";if(n!="bottom")e.top=t.top;else{e.top="auto"}if(n!="left")e.right=t.right;else{e.right="auto"}if(n!="right")e.left=t.left;else{e.left="auto"}if(n!="top")e.bottom=t.bottom;else{e.bottom="auto"}}function n(e,t,n){if("top|bottom".indexOf(t)!=-1)size=e.outerHeight(true);if("left|right".indexOf(t)!=-1)size=e.outerWidth(true);if(t=="bottom")n.bottom+=size;if(t=="left")n.left+=size;if(t=="right")n.right+=size;if(t=="top")n.top+=size}function r(t){var n=e.length;while(n--)t.removeClass("dock-"+e[n])}function i(e,i,s){var o={};r(e);t(o,s,i);e.addClass("dock-"+i);e.css(o);n(e,i,s)}var s=function(t,n){var r={top:0,bottom:0,left:0,right:0};var s=[];this.addChild=function(t,o){var u=n.$eval(o);if(e.indexOf(u)==-1)throw{message:"dock position must be one of this: "+e.join(", ")};s.push({element:t,pos:o,order:s.length});i(t,u,r)};this.refresh=function(){r.top=0;r.bottom=0;r.left=0;r.right=0;for(var e=0;e<s.length;e++){var t=n.$eval(s[e].pos);i(s[e].element,t,r)}};var o=this;$(window).resize(function(){o.refresh()});n.$watch(function(){o.refresh()})};return s}()}}).directive("dockRef",function(e){return{restrict:"A",controller:function(t,n){t.__dock_ref_id=String(Math.random()).replace(/\./g,"");e.dockRefs[t.__dock_ref_id]=new e.Area(n,t)},scope:true}}).directive("dock",function(e){return{restrict:"A",controller:function(t,n){var r=n.attr("dock");t.__dock_id=String(Math.random()).replace(/\./g,"");var i=e.dockRefs[t.$parent.__dock_ref_id];i.addChild(n,r)},scope:true}}).directive("dockResizable",function(e){return{require:"dock",restrict:"A",controller:function(t,n){var r=t.$eval(n.attr("dock"));if(e.valids.indexOf(r)>0&&r!="fill"){n.resizable({handles:e.handlesByDock[r]})}}}})
